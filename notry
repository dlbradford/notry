#!/usr/bin/env python3.14
"""Notry - Terminal Notes Application"""

if __name__ == "__main__":
    import sys
    import site
    from pathlib import Path
    
    # Add user site-packages
    possible_paths = [
        site.getusersitepackages(),
        Path.home() / ".local" / "lib" / f"python{sys.version_info.major}.{sys.version_info.minor}" / "site-packages",
    ]
    
    for path in possible_paths:
        path_str = str(path)
        if Path(path_str).exists() and path_str not in sys.path:
            sys.path.insert(0, path_str)
    
    # Add script directory
    script_dir = Path(__file__).parent.resolve()
    sys.path.insert(0, str(script_dir))
    
    # Import and run
    try:
        import textual
        from tn_improved import main
        exit_code = main()
        sys.exit(exit_code if exit_code is not None else 0)
    except ImportError as e:
        print(f"✗ Import failed: {e}")
        print(f"\nPython version: {sys.version}")
        print(f"\nInstall textual:")
        print(f"  python3.14 -m pip install --user textual")
        input("\nPress Enter...")
        sys.exit(1)
    except Exception as e:
        print(f"✗ Error: {e}")
        import traceback
        traceback.print_exc()
        input("\nPress Enter...")
        sys.exit(1)
